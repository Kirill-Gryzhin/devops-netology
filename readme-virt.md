  Задание 1

Опишите кратко, в чём основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

  Решение 1

Паравиртуализация - гипервизор использует ОС для доступа к аппаратной части сервера

Аппаратная виртуализация - гипервизор является ОС, виртуальные машины работают напрямую с ЦПУ сервера

Виртуализация на основе ОС - гипервизором является ядро ОС, использует ядра которые не отличаются от типа хостовой ОС

  Задание 2

Выберите один из вариантов использования организации физических серверов в зависимости от условий использования.

Организация серверов:

* физические сервера,

* паравиртуализация,

* виртуализация уровня ОС.


Условия использования:

* высоконагруженная база данных, чувствительная к отказу;

* различные web-приложения;

* Windows-системы для использования бухгалтерским отделом;

* системы, выполняющие высокопроизводительные расчёты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.


  Решение 2

* Высоконагруженная база данных, чувствительная к отказу - я бы выбрал аппаратную кластеризованную виртуализацию (vSphere), так как база чувствительна к отказу,  за возможность масштабирования и возможности откатится на снапшот, если варианта кластеризации нет, то физическое железо, поскольку максимальная производительность будет доступна при прямом обращении к аппаратной части.


* Различные web-приложения – предпочел бы виртуализацию на уровне ОС, web приложения можно разместить на одной ос (контейнированно) с ограничением ресурсов. 

* Windows-системы для использования бухгалтерским отделом - подойдет паравиртуализация с использованием (Hyper-V, Vmware), легкость и быстрота создания снапшотов и миграции на другой физический, масштабируемость. Бухгалтерский софт обычно не высоконагруженный.

* Системы, выполняющие высокопроизводительные расчёты на GPU - тут бы я выбрал физический сервер, для максимально быстрых рассчетов на GPU требуется прямой доступ к ней.


  Задание 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

* 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

* Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

* Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.

* Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

  Решение 3

1. Для первого сценария подойдут кластеризованные Hyper-V и Vsphere. Простота миграции в случае отказа одного из физических серверов, есть все необходимые инструменты для балансировки и репликации, поддерживают как встроенное резервное копирование (snapshot), так и использование сторонних средств, например Veeam

2. для второго сценария подойдут Vmware ESXI и KVM оба варианта высокопроизводительные и бесплатные, отлично дружат с ОС windows и Linux.
3. При условии, что вся инфраструктура построена на Windows, то Hyper-V так как это бесплатная роль любого Windows server. Максимально совместима с виртуалками на Windows

4. Для данного сценария подошла контейнеризация от Doker. Отлично совместим почти  со всеми версиями ядер Linux, быстрота развертки, куча готовых контейнеров с разными ос семейства Linux

  Задание 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

  Решение 4

Основные проблемы с миграцией виртуальных машин из одной системы виртуализации в другую. Для минимизации рисков в каждой из систем надо иметь достаточное количество запасных физических машин в кластере, что бы при выходе из строя одной, хватило мощности для поддержания работоспособности виртуалок. Если создавать гетерогенную среду, то только с использованием Docker подобных систем, на одном или нескольких виртуальных хостах. 
Пример из жизни сгорела одна из нод кластера Hyper-V, мощности вытянуть все виртуалки  2х других нод не хватило, Второй кластер был развернут на vSphere, там было достаточно запаса ресурсов. Как итог пришлось выключать часть машин на Hyper-V, с помощью vmware converter мигрировать часть машин на vSphere, что заняло достаточно много времени.
